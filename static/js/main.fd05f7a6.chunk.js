(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__jo466",form:"Searchbar_form__XuKjc",button:"Searchbar_button__MhnaU",input:"Searchbar_input__2C4aO"}},15:function(e,t,n){e.exports={item:"ImageGalleryItem_item__26F25",image:"ImageGalleryItem_image__32_jr"}},27:function(e,t,n){e.exports={gallery:"ImageGallery_gallery__gboaM"}},28:function(e,t,n){e.exports={button:"Button_button__3QF_k"}},30:function(e,t,n){e.exports={loader:"ModalLoader_loader__8XFZM"}},31:function(e,t,n){e.exports={App:"App_App__aOmNj"}},32:function(e,t,n){e.exports={overlay:"Overlay_overlay__3DDtl"}},33:function(e,t,n){e.exports={modal:"Modal_modal__P3_V5"}},40:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),c=n.n(o),i=(n(40),n(16)),u=n(4),s=n(5),l=n(7),h=n(6),m=n(9),d=n.n(m),f=n(17),p=n(14),b=n(26),j=n.n(b),v=n(35),g="https://pixabay.com/api",O={key:"24268385-a09efe65560efa0dec086fa93",image_type:"photo",orientation:"horizontal",editors_choice:"true",safesearch:"true",per_page:"12"},y=["webformatURL","largeImageURL"],w="There are no matching images.",_="You've reached the end of search results.",x={page:1,totalHits:null,query:null},k=function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,a,r,o,c,i,u=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:"cat",n=u.length>1&&void 0!==u[1]?u[1]:1,x.page=n,a=Object(f.a)({q:t,page:n},O),e.next=6,j.a.get(g,{params:a});case 6:return r=e.sent,o=r.data,c=N(o),i=E(c),L(o.totalHits),x.totalHits=o.totalHits,x.query=t,e.abrupt("return",I(i));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(x.page),e.next=3,k(x.query,x.page+1);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){if(e*O.per_page>=x.totalHits)throw new Error(_)},L=function(e){if(0===e)throw new Error(w)},I=function(e){return new Promise((function(t){return t(e)}))},N=function(e){return e.hits.map(M)},M=function(e){return y.reduce((function(t,n){return t[n]=e[n],t}),{})},E=function(e){return e.map((function(e){return Object(f.a)({id:Object(v.a)()},e)}))},U=n(10),A=n.n(U),P=n(34),R=n(1),q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.onSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.value)},e.onChange=function(t){e.setState({value:t.target.value})},e}return Object(s.a)(n,[{key:"render",value:function(){return Object(R.jsx)("header",{className:A.a.searchbar,children:Object(R.jsxs)("form",{className:A.a.form,onSubmit:this.onSubmit,children:[Object(R.jsx)("button",{type:"submit",className:A.a.button,children:Object(R.jsx)(P.a,{size:20})}),Object(R.jsx)("input",{className:A.a.input,onChange:this.onChange,value:this.state.value,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),n}(a.Component),F=n(15),V=n.n(F),D=function(e){var t=e.onClick,n=e.url;return Object(R.jsx)("li",{onClick:t,className:V.a.item,children:Object(R.jsx)("img",{className:V.a.image,src:n,alt:""})})},H=n(27),G=n.n(H);var T=function(e){var t=e.onItemClick,n=e.images;return Object(R.jsx)("ul",{className:G.a.gallery,children:n.map((function(e){var n=e.id,a=e.webformatURL;return Object(R.jsx)(D,{onClick:function(){return t(n)},url:a},n)}))})},z=n(28),B=n.n(z),J=function(e){var t=e.onClick;return Object(R.jsx)("button",{className:B.a.button,type:"button",onClick:t,children:"Load more"})},X=n(29),Y=n.n(X),K=(n(81),n(30)),Q=n.n(K),W=document.querySelector("#loader"),Z=function(e){var t=e.color,n=void 0===t?"#fff":t,a=Object(R.jsx)("div",{className:Q.a.loader,children:Object(R.jsx)(Y.a,{type:"Oval",color:n,height:100,width:100,timeout:0})});return Object(o.createPortal)(a,W)},$=n(31),ee=n.n($),te=n(32),ne=n.n(te),ae=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleOverlayClick=function(t){t.target===t.currentTarget&&e.props.onOverlayClick()},e}return Object(s.a)(n,[{key:"render",value:function(){return Object(R.jsx)("div",{onClick:this.handleOverlayClick,className:ne.a.overlay,children:this.props.component})}}]),n}(r.a.Component),re=n(33),oe=n.n(re),ce=document.querySelector("#modal"),ie=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onEscPress=function(t){"Escape"===t.code&&e.props.onClose()},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onEscPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onEscPress)}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.url,a=Object(R.jsxs)("div",{className:oe.a.modal,children:[Object(R.jsx)(Z,{}),Object(R.jsx)("img",{src:n,alt:""})]});return Object(o.createPortal)(Object(R.jsx)(ae,{onOverlayClick:t,component:a}),ce)}}]),n}(a.Component),ue="empty",se="loading",le="normal",he="end",me="modal",de=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],view:se,backupView:"",modalImageURL:""},e.handleSubmit=function(t){e.handleLoading((function(){return k(t)}),(function(t){return e.setState({images:t,view:le})}))},e.handleLoadMore=function(){var t=C;e.handleLoading(t,(function(t){e.setState((function(e){return{images:[].concat(Object(i.a)(e.images),Object(i.a)(t)),view:le}}))}))},e.handleLoading=function(t,n){e.setState((function(e){return{backupView:e.view,view:se}})),t().then(n).then((function(){return e.setState({view:le})})).catch(e.handleFetchError)},e.handleFetchError=function(t){t.message!==_?t.message!==w?(console.log(t.message),e.setState((function(e){return{view:e.backupView}}))):e.setState({images:[],view:ue}):e.setState({view:he})},e.handleModalClose=function(){e.setState((function(e){return{view:e.backupView}}))},e.handleItemClick=function(t){e.setState((function(e){return{backupView:e.view,modalImageURL:e.images.find((function(e){return e.id===t})).largeImageURL,view:me}}))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.handleLoading((function(){return k()}),(function(t){return e.setState({images:t,view:le})}))}},{key:"render",value:function(){var e=this.state,t=e.images,n=e.view,a=e.modalImageURL,r=se,o=le,c=he,i=me,u=ue;return Object(R.jsxs)("main",{className:ee.a.App,children:[Object(R.jsx)(q,{onSubmit:this.handleSubmit}),Object(R.jsx)(T,{onItemClick:this.handleItemClick,images:t}),n===u&&Object(R.jsx)("p",{children:"There are no matching images."}),n===o&&Object(R.jsx)(J,{onClick:this.handleLoadMore}),n===c&&Object(R.jsx)("p",{children:"You've reached the collection end."}),n===r&&Object(R.jsx)(Z,{color:"#3f51b5"}),n===i&&Object(R.jsx)(ie,{url:a,onClose:this.handleModalClose})]})}}]),n}(a.Component);c.a.render(Object(R.jsx)(a.StrictMode,{children:Object(R.jsx)(de,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.fd05f7a6.chunk.js.map